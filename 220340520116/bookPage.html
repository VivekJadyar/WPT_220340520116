<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exam | Document</title>
    <script src="jquery-3.5.1.min.js"></script>


    <script>

        $(() =>{

            $('#bookid').disabled = false;

            $('#bookid').blur(() =>{                        // working properly
                let input = $("#bookid").val();

                $('#bookid').disabled = true;

                let Objsend = {
                    data: { id: input },
                    url: "http://localhost:8081/getBook",
                    type: 'get',
                    dataType: 'json',
                    success: (objFromServer) => {
                        if(objFromServer.status){
                            $('#mes1').text("Book datails are found.");                 // working
                            $('#bookname').val(objFromServer.details.bookname);         // working
                            $('#price').val(objFromServer.details.price);               // working

                            $('#mes').text(objFromServer.details.bookid + "   " + objFromServer.details.bookname + "   " + objFromServer.details.price);    // working
                        }
                        else{
                            $('#mes1').text("Book datails are not found."); 
                            $('#bookname').val("");
                            $('#price').val("");
                        }
                    },
                    error: (error) => {
                        console.log("Error: " + error);
                    }
                }

                $.ajax(Objsend);

            })


            //---------------------------------


            $('#btn2').click(() =>{
                let ipid = $("#bookid").val();
                let ipname = $("#bookname").val();
                let ipprice = $("#price").val();

                $('#bookid').disabled = true;

                let Objsend = {
                    data: { 
                        id: ipid,
                        name: ipname,
                        price: ipprice
                     },
                    url: "http://localhost:8081/update",
                    type: 'get',
                    dataType: 'json',
                    success: (objFromServer) => {
                        if(objFromServer.status == true){
                            $('#mes1').text("Book is added to the list.");
                            // $('#bookname').val(objFromServer.bookname);
                            // $('#price').val(objFromServer.price);

                            // $('#mes').text(objFromServer.bookid + " " + objFromServer.bookname + " " + objFromServer.price);
                        }
                        else{

                        }
                    },
                    error: (error) => {
                        console.log("Error: " + error);
                    }
                }

                $.ajax(Objsend);

            })

            // --------------------------------------



            $('#btn1').click(() =>{
                let ipid = $("#bookid").val();
                let ipname = $("#bookname").val();
                let ipprice = $("#price").val();

                $('#bookid').disabled = true;

                let Objsend = {
                    data: { 
                        id: ipid,
                        name: ipname,
                        price: ipprice
                     },
                    url: "http://localhost:8081/insert",
                    type: 'get',
                    dataType: 'json',
                    success: (objFromServer) => {
                        if(objFromServer.status == true){
                            $('#mes1').text("Book is added to the list.");
                            // $('#bookname').val(objFromServer.bookname);
                            // $('#price').val(objFromServer.price);

                            // $('#mes').text(objFromServer.bookid + " " + objFromServer.bookname + " " + objFromServer.price);
                        }
                        else{

                        }
                    },
                    error: (error) => {
                        console.log("Error: " + error);
                    }
                }

                $.ajax(Objsend);

            })

            // --------------------------------------

            

        })

    </script>


</head>
<body>
    <input id="bookid" placeholder="EnterBook ID">
    <span id="mes1"></span><br>
    <input id="bookname" placeholder="Enter Book Name"><br>
    <input id="price" placeholder="Enter Book Price"><br>
    <button id="btn1" >Add</button>
    <button id="btn2" >Update</button>
    <button id="btn3" >Show Add</button>

    <h2 id="mes"></h2>



    
</body>
</html>